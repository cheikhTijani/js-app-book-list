function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},r=o.parcelRequire2236;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){s[e]=t},o.parcelRequire2236=r),r.register("kyEFX",(function(t,o){var n,s;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return s}),(function(e){return s=e}));var r={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)r[t[o]]=e[t[o]]},s=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("kyEFX").register(JSON.parse('{"3f2PK":"index.5a446b7c.js","6lviM":"check-circle.1f2cf466.svg","5hncq":"hourglass.4b16d1c6.svg","f6DlM":"pencil-square.2ffc889c.svg","5IOqg":"trash.5a41c71e.svg"}'));var l;l=new URL(r("kyEFX").resolve("6lviM"),import.meta.url).toString();var a;a=new URL(r("kyEFX").resolve("5hncq"),import.meta.url).toString();var i;i=new URL(r("kyEFX").resolve("f6DlM"),import.meta.url).toString();var d;d=new URL(r("kyEFX").resolve("5IOqg"),import.meta.url).toString();const c=document.querySelector(".add-book"),u=document.querySelector(".update-book"),m=document.querySelector(".cancel-update"),g=document.querySelector(".alert"),f=document.querySelector(".book-list"),h=document.getElementsByClassName("confirmDelBtn")[0],k=document.querySelector(".books-left");let b=document.getElementsByClassName("book-row");class v{constructor(e,t,o,n){this.title=e,this.author=t,this.genres=o,this.count=n}}class w{addBookToList(e){const o=document.createElement("tr");return o.classList="book-row",o.id=`book-row-${e.count}`,o.innerHTML=`\n            <td>${e.title}</td>\n            <td>${e.author}</td>\n            <td>${e.genres}</td>\n            <td class="countdown-${e.count}"></td>\n            <td>\n                <a class="d-none text-decoration-none text-dark fw-bold" href="#" title="update">\n                    <img src=${t(i)} class="updateBook" alt="update icon">\n                </a>\n                &nbsp;\n                <a class="d-none text-decoration-none text-dark fw-bold" data-bs-toggle="modal" data-bs-target="#confirmDelete" href="#" title="delete">\n                    <img src=${t(d)} class="deleteBook" alt="Delete icon">\n                </a>\n            </td>\n            `,f.appendChild(o),this.bookTimer(5,1e3),this.UpdateBookCount(),c.classList.add("d-none"),this}showMsg(e,t=""){return"error"===e&&(g.textContent=t,g.classList.add("alert-danger"),g.classList.remove("d-none")),"clear"===e&&(g.textContent=t,g.classList.remove("alert-danger","alert-success"),g.classList.add("d-none")),"success"===e&&(g.textContent=t,g.classList.add("alert-success"),g.classList.remove("d-none")),this}removeBook(e){return e.classList.contains("deleteBook")&&h.addEventListener("click",(()=>{e.closest("tr").remove(),p.removeBook(e.closest("tr").id.split("-")[2]),this.showMsg("success","Book successfully deleted"),setTimeout((()=>this.showMsg("clear")),2e3),this.UpdateBookCount()})),this}UpdateBookCount(){b=document.getElementsByClassName("book-row");const e=36-b.length;return k.textContent=`${e} ${1!==e?"books":"book"} left`,this}getDetails(e,t){const o=e.children[0].textContent,n=e.children[1].textContent,s=e.children[2].textContent;return document.getElementById("titleUp").value=o,document.getElementById("authorUp").value=n,document.getElementById("genresUp").value=s,document.getElementById("book-hidden-id").value=t,this}bookTimer(e,o){b=document.getElementsByClassName("book-row");const n=b[b.length-1].children[3];r();let s=setInterval(r,o);function r(){e>0?(n.textContent=`${e} ${1!==e?"days":"day"} left`,--e):(clearInterval(s),s=null,n.innerHTML=`\n                    <a class="text-decoration-none text-dark fw-bold" href="#" title="Done">\n                        <img src=${t(l)} class="bookDone" alt="done icon">\n                    </a>\n                    &nbsp;\n                    <a class="text-decoration-none text-dark fw-bold" href="#" title="More time">\n                    <img src=${t(a)} class="wait" alt="wait icon">\n                    </a>`)}return this}}class p{static getBooks(){let e;return e=localStorage.getItem("books")?JSON.parse(localStorage.getItem("books")):[],e}static displayBooks(){p.getBooks().forEach((e=>{const o=document.createElement("tr");o.classList="book-row",o.id=`book-row-${e.count}`,o.innerHTML=`\n                <td>${e.title}</td>\n                <td>${e.author}</td>\n                <td>${e.genres}</td>\n                <td class="countdown-${e.count}">Done</td>\n                <td>\n                    <a class="text-decoration-none text-dark fw-bold" href="#" title="update">\n                        <img src=${t(i)} class="updateBook" alt="update icon">\n                    </a>\n                    &nbsp;\n                    <a class="text-decoration-none text-dark fw-bold" data-bs-toggle="modal" data-bs-target="#confirmDelete" href="#" title="delete">\n                        <img src=${t(d)} class="deleteBook" alt="Delete icon">\n                    </a>\n                </td>\n                `,f.appendChild(o)}))}static addBook(e){const t=p.getBooks();t.push(e),localStorage.setItem("books",JSON.stringify(t))}static removeBook(e){const t=p.getBooks();t.forEach(((o,n)=>{o.count===+e&&t.splice(n,1)})),localStorage.setItem("books",JSON.stringify(t))}static updatebook(e,t,o,n){const s=p.getBooks();s.forEach((s=>{s.count===+n&&(s.title=e,s.author=t,s.genres=o)})),localStorage.setItem("books",JSON.stringify(s))}static initBookCount(){const e=36-b.length;e<36&&(k.textContent=`${e} ${1!==e?"books":"book"} left`),e<=0&&(k.textContent,c.classList.add("d-none"))}}document.addEventListener("DOMContentLoaded",(()=>{p.initBookCount(),p.displayBooks()})),c.addEventListener("submit",(function(e){e.preventDefault();const t=document.getElementById("title").value.trim(),o=document.getElementById("author").value.trim(),n=document.getElementById("genres").value.trim(),s=new w;if(""===t||""===o||""===n)return s.showMsg("error","Please fill in all the fields"),void setTimeout((()=>s.showMsg("clear")),2e3);let r;s.showMsg("clear"),b=document.getElementsByClassName("book-row");if(Array.from(b).find((e=>e.children[0].textContent.toLocaleLowerCase()===t.toLocaleLowerCase()&&e.children[1].textContent.toLocaleLowerCase()===o.toLocaleLowerCase())))return s.showMsg("error","You already added this book"),void setTimeout((()=>s.showMsg("clear")),2e3);if(0===b.length)r=1;else{const e=b[b.length-1];if("Done"!==e.children[3].textContent)return s.showMsg("error","You need to finish current book"),void setTimeout((()=>s.showMsg("clear")),3e3);r=+e.id.split("-")[2]+1}const l=new v(t,o,n,r);s.addBookToList(l),s.showMsg("success","Book added successfully"),setTimeout((()=>s.showMsg("clear")),2e3),c.reset()})),u.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("titleUp").value.trim(),o=document.getElementById("authorUp").value.trim(),n=document.getElementById("genresUp").value.trim(),s=document.getElementById("book-hidden-id").value.trim(),r=new w;if(""===t||""===o||""===n)return r.showMsg("error","Please fill in all the fields"),void setTimeout((()=>r.showMsg("clear")),2e3);r.showMsg("clear"),b=document.getElementsByClassName("book-row");const l=Array.from(b).find((e=>e.id===s));l.children[0].textContent=t,l.children[1].textContent=o,l.children[2].textContent=n,p.updatebook(t,o,n,l.id.split("-")[2]),r.showMsg("success","Updated successfully"),setTimeout((()=>r.showMsg("clear")),2e3),u.reset(),u.classList.add("d-none"),c.classList.remove("d-none")})),m.addEventListener("click",(function(e){e.preventDefault(),u.reset(),u.classList.add("d-none"),c.classList.remove("d-none")})),f.addEventListener("click",(e=>{if(e.target.classList.contains("deleteBook")){(new w).removeBook(e.target)}if(e.target.classList.contains("updateBook")){c.classList.add("d-none"),u.classList.remove("d-none");const t=e.target.closest(".book-row"),o=t.id;(new w).getDetails(t,o)}if(e.target.classList.contains("bookDone")){const t=e.target.closest(".book-row");t.children[3].innerHTML="Done";Array.from(t.children[4].children).forEach((e=>e.classList.remove("d-none")));const o=t.children[0].textContent,n=t.children[1].textContent,s=t.children[2].textContent,r=+t.id.split("-")[2],l=new v(o,n,s,r);p.addBook(l),c.classList.remove("d-none")}if(e.target.classList.contains("wait")){(new w).bookTimer(2,1e3)}}));
//# sourceMappingURL=index.5a446b7c.js.map
