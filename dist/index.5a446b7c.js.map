{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-b3f37bf7c7df543e.js","node_modules/@parcel/runtime-js/lib/runtime-4d73608793e5064d.js","node_modules/@parcel/runtime-js/lib/runtime-ee0d94cf43c039b4.js","node_modules/@parcel/runtime-js/lib/runtime-aa4db716ffdd4f42.js","node_modules/@parcel/runtime-js/lib/runtime-d26ba30ee529e2b1.js","src/script.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"3f2PK\\\":\\\"index.5a446b7c.js\\\",\\\"6lviM\\\":\\\"check-circle.1f2cf466.svg\\\",\\\"5hncq\\\":\\\"hourglass.4b16d1c6.svg\\\",\\\"f6DlM\\\":\\\"pencil-square.2ffc889c.svg\\\",\\\"5IOqg\\\":\\\"trash.5a41c71e.svg\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6lviM\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5hncq\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"f6DlM\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5IOqg\")).toString();","'use strict';\r\nimport doneIcon from './assets/icons/check-circle.svg';\r\nimport waitIcon from './assets/icons/hourglass.svg';\r\nimport editIcon from './assets/icons/pencil-square.svg';\r\nimport deleteIcon from './assets/icons/trash.svg';\r\n\r\n// Get DOM General elements\r\nconst addBookForm = document.querySelector('.add-book');\r\nconst updateBookForm = document.querySelector('.update-book');\r\nconst cancelUpdateBtn = document.querySelector('.cancel-update');\r\nconst formAlert = document.querySelector('.alert');\r\nconst bookList = document.querySelector('.book-list');\r\nconst confirmDelBtn = document.getElementsByClassName('confirmDelBtn')[0];\r\nconst booksLeftEl = document.querySelector('.books-left');\r\nlet booksCount = document.getElementsByClassName('book-row');\r\n\r\n\r\n// Book constructor\r\nclass Book {\r\n    constructor(title, author, genres, count) {\r\n        this.title = title;\r\n        this.author = author;\r\n        this.genres = genres;\r\n        this.count = count;\r\n    }\r\n}\r\n\r\n// BookUI constructor\r\nclass BookUI {\r\n    // methods\r\n\r\n    // render book to DOM\r\n    addBookToList(book) {\r\n        // create tr\r\n        const row = document.createElement('tr');\r\n        row.classList = 'book-row';\r\n        row.id = `book-row-${book.count}`;\r\n        // insert cols\r\n        row.innerHTML = `\r\n            <td>${book.title}</td>\r\n            <td>${book.author}</td>\r\n            <td>${book.genres}</td>\r\n            <td class=\"countdown-${book.count}\"></td>\r\n            <td>\r\n                <a class=\"d-none text-decoration-none text-dark fw-bold\" href=\"#\" title=\"update\">\r\n                    <img src=${editIcon} class=\"updateBook\" alt=\"update icon\">\r\n                </a>\r\n                &nbsp;\r\n                <a class=\"d-none text-decoration-none text-dark fw-bold\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmDelete\" href=\"#\" title=\"delete\">\r\n                    <img src=${deleteIcon} class=\"deleteBook\" alt=\"Delete icon\">\r\n                </a>\r\n            </td>\r\n            `;\r\n        bookList.appendChild(row);\r\n\r\n        // timer\r\n        this.bookTimer(5, 1000);\r\n\r\n        // update books count\r\n        this.UpdateBookCount();\r\n\r\n        // hide form\r\n        addBookForm.classList.add('d-none');\r\n\r\n        return this;\r\n    }\r\n\r\n    // show messages UI\r\n    showMsg(status, msg = '') {\r\n        if (status === 'error') {\r\n            formAlert.textContent = msg;\r\n            formAlert.classList.add('alert-danger');\r\n            formAlert.classList.remove('d-none');\r\n        }\r\n        if (status === 'clear') {\r\n            formAlert.textContent = msg;\r\n            formAlert.classList.remove('alert-danger', 'alert-success');\r\n            formAlert.classList.add('d-none');\r\n        }\r\n        if (status === 'success') {\r\n            formAlert.textContent = msg;\r\n            formAlert.classList.add('alert-success');\r\n            formAlert.classList.remove('d-none');\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    // remove book from UI\r\n    removeBook(target) {\r\n        if (target.classList.contains('deleteBook')) {\r\n            // listen to confirm delete\r\n            confirmDelBtn.addEventListener('click', () => {\r\n                target.closest('tr').remove();\r\n                // remove from LS\r\n                Store.removeBook(target.closest('tr').id.split('-')[2]);\r\n                // show confirmation msg\r\n                this.showMsg('success', 'Book successfully deleted');\r\n                setTimeout(() => this.showMsg('clear'), 2000);\r\n                this.UpdateBookCount();\r\n            });\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    // book count update\r\n    UpdateBookCount() {\r\n        booksCount = document.getElementsByClassName('book-row');\r\n        const booksLeft = 36 - booksCount.length;\r\n        booksLeftEl.textContent = `${booksLeft} ${booksLeft !== 1 ? 'books' : 'book'} left`;\r\n        return this;\r\n    }\r\n\r\n    // get deatils\r\n    getDetails(bookRow, id) {\r\n        // get row text content\r\n        const title = bookRow.children[0].textContent;\r\n        const author = bookRow.children[1].textContent;\r\n        const genres = bookRow.children[2].textContent;\r\n        // put them in the update form\r\n        document.getElementById('titleUp').value = title;\r\n        document.getElementById('authorUp').value = author;\r\n        document.getElementById('genresUp').value = genres;\r\n        document.getElementById('book-hidden-id').value = id;\r\n        return this;\r\n    }\r\n\r\n    bookTimer(daysLeft, delay) {\r\n        booksCount = document.getElementsByClassName('book-row');\r\n        const daysLeftEl = booksCount[booksCount.length - 1].children[3];\r\n        // let daysLeft = 5;\r\n        // let delay = 86400000; // 1 day in milliseconds\r\n        // let delay = 1000;\r\n        countDown();\r\n        let timer = setInterval(countDown, delay);\r\n\r\n        function countDown() {\r\n            if (daysLeft > 0) {\r\n                daysLeftEl.textContent = `${daysLeft} ${daysLeft !== 1 ? 'days' : 'day'} left`;\r\n                --daysLeft;\r\n            } else {\r\n                clearInterval(timer);\r\n                timer = null;\r\n                daysLeftEl.innerHTML = `\r\n                    <a class=\"text-decoration-none text-dark fw-bold\" href=\"#\" title=\"Done\">\r\n                        <img src=${doneIcon} class=\"bookDone\" alt=\"done icon\">\r\n                    </a>\r\n                    &nbsp;\r\n                    <a class=\"text-decoration-none text-dark fw-bold\" href=\"#\" title=\"More time\">\r\n                    <img src=${waitIcon} class=\"wait\" alt=\"wait icon\">\r\n                    </a>`;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\n\r\n// LOCAL STORAGE\r\nclass Store {\r\n    static getBooks() {\r\n        let books;\r\n        if (!localStorage.getItem('books')) {\r\n            books = [];\r\n        } else {\r\n            books = JSON.parse(localStorage.getItem('books'))\r\n        }\r\n        return books;\r\n    }\r\n    static displayBooks() {\r\n        const books = Store.getBooks();\r\n\r\n        books.forEach((book) => {\r\n            // create tr\r\n            const row = document.createElement('tr');\r\n            row.classList = 'book-row';\r\n            row.id = `book-row-${book.count}`;\r\n            // insert cols\r\n            row.innerHTML = `\r\n                <td>${book.title}</td>\r\n                <td>${book.author}</td>\r\n                <td>${book.genres}</td>\r\n                <td class=\"countdown-${book.count}\">Done</td>\r\n                <td>\r\n                    <a class=\"text-decoration-none text-dark fw-bold\" href=\"#\" title=\"update\">\r\n                        <img src=${editIcon} class=\"updateBook\" alt=\"update icon\">\r\n                    </a>\r\n                    &nbsp;\r\n                    <a class=\"text-decoration-none text-dark fw-bold\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmDelete\" href=\"#\" title=\"delete\">\r\n                        <img src=${deleteIcon} class=\"deleteBook\" alt=\"Delete icon\">\r\n                    </a>\r\n                </td>\r\n                `;\r\n            bookList.appendChild(row);\r\n        });\r\n    }\r\n    static addBook(newBook) {\r\n        const books = Store.getBooks();\r\n        books.push(newBook);\r\n        localStorage.setItem('books', JSON.stringify(books));\r\n    }\r\n    static removeBook(count) {\r\n        const books = Store.getBooks();\r\n        books.forEach((book, index) => {\r\n            if (book.count === +count) {\r\n                books.splice(index, 1);\r\n            }\r\n        });\r\n        localStorage.setItem('books', JSON.stringify(books));\r\n    }\r\n\r\n    static updatebook(title, author, genres, count) {\r\n        const books = Store.getBooks();\r\n        books.forEach(book => {\r\n            if (book.count === +count) {\r\n                book.title = title;\r\n                book.author = author;\r\n                book.genres = genres;\r\n            }\r\n        });\r\n        localStorage.setItem('books', JSON.stringify(books));\r\n    }\r\n\r\n    // initial book count\r\n    static initBookCount() {\r\n        const booksLeft = 36 - booksCount.length;\r\n        if (booksLeft < 36) booksLeftEl.textContent = `${booksLeft} ${booksLeft !== 1 ? 'books' : 'book'} left`;\r\n        if (booksLeft <= 0) {\r\n            booksLeftEl.textContent === 'Congratulations, You did it';\r\n            addBookForm.classList.add('d-none');\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// EVENT LISTENERS\r\n\r\n// DOM load event\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    Store.initBookCount();\r\n    Store.displayBooks();\r\n\r\n});\r\n\r\n// Add book event listener\r\naddBookForm.addEventListener('submit', function (e) {\r\n\r\n    e.preventDefault();\r\n\r\n    // form values\r\n    const title = document.getElementById('title').value.trim();\r\n    const author = document.getElementById('author').value.trim();\r\n    const genres = document.getElementById('genres').value.trim();\r\n\r\n    // add ui instance\r\n    const UI = new BookUI();\r\n\r\n    // check if empty values\r\n    if (title === '' || author === '' || genres === '') {\r\n        UI.showMsg('error', 'Please fill in all the fields');\r\n        setTimeout(() => UI.showMsg('clear'), 2000);\r\n        return;\r\n    }\r\n\r\n    // clear msg errors\r\n    UI.showMsg('clear');\r\n\r\n    // count\r\n    let count;\r\n    booksCount = document.getElementsByClassName('book-row');\r\n\r\n    // check if book already exists\r\n    const bookRows = Array.from(booksCount);\r\n    const result = bookRows.find(row => row.children[0].textContent.toLocaleLowerCase() === title.toLocaleLowerCase() && row.children[1].textContent.toLocaleLowerCase() === author.toLocaleLowerCase());\r\n\r\n    if (result) {\r\n        UI.showMsg('error', 'You already added this book');\r\n        setTimeout(() => UI.showMsg('clear'), 2000);\r\n        return;\r\n    }\r\n\r\n    if (booksCount.length === 0) {\r\n        count = 1;\r\n    } else {\r\n        const lastBook = booksCount[booksCount.length - 1];\r\n        if (lastBook.children[3].textContent !== 'Done') {\r\n            UI.showMsg('error', 'You need to finish current book');\r\n            setTimeout(() => UI.showMsg('clear'), 3000);\r\n            return;\r\n        }\r\n        const lastId = +lastBook.id.split('-')[2];\r\n        count = lastId + 1;\r\n    }\r\n\r\n    // Add book instance\r\n    const book = new Book(title, author, genres, count);\r\n\r\n    // add book to list using UI class\r\n    UI.addBookToList(book);\r\n\r\n    // show succes msg\r\n    UI.showMsg('success', 'Book added successfully');\r\n    setTimeout(() => UI.showMsg('clear'), 2000);\r\n\r\n    // clear fields\r\n    addBookForm.reset();\r\n\r\n});\r\n\r\n// Update book event listener\r\nupdateBookForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const title = document.getElementById('titleUp').value.trim();\r\n    const author = document.getElementById('authorUp').value.trim();\r\n    const genres = document.getElementById('genresUp').value.trim();\r\n    const rowId = document.getElementById('book-hidden-id').value.trim();\r\n\r\n    // add ui instance\r\n    const UI = new BookUI();\r\n\r\n    // check if empty values\r\n    if (title === '' || author === '' || genres === '') {\r\n        UI.showMsg('error', 'Please fill in all the fields');\r\n        setTimeout(() => UI.showMsg('clear'), 2000);\r\n        return;\r\n    }\r\n\r\n    // clear msg errors\r\n    UI.showMsg('clear');\r\n\r\n    // find the row\r\n    booksCount = document.getElementsByClassName('book-row');\r\n    const bookRows = Array.from(booksCount);\r\n    const row = bookRows.find(row => row.id === rowId);\r\n\r\n    // update it\r\n    row.children[0].textContent = title;\r\n    row.children[1].textContent = author;\r\n    row.children[2].textContent = genres;\r\n\r\n    // update in LS\r\n    Store.updatebook(title, author, genres, row.id.split('-')[2]);\r\n\r\n    // show update msg \r\n    UI.showMsg('success', 'Updated successfully');\r\n    setTimeout(() => UI.showMsg('clear'), 2000);\r\n    // reset form\r\n    updateBookForm.reset();\r\n    // hide it\r\n    updateBookForm.classList.add('d-none');\r\n    addBookForm.classList.remove('d-none');\r\n\r\n});\r\n\r\n// cancel update event listener\r\ncancelUpdateBtn.addEventListener('click', function (e) {\r\n    e.preventDefault();\r\n    updateBookForm.reset();\r\n    updateBookForm.classList.add('d-none');\r\n    addBookForm.classList.remove('d-none');\r\n});\r\n\r\n\r\n\r\n\r\n// event listener for DELETE Update BOOK\r\nbookList.addEventListener('click', (e) => {\r\n    // delete book\r\n    if (e.target.classList.contains('deleteBook')) {\r\n        // add ui instance\r\n        const UI = new BookUI();\r\n        // call delete\r\n        UI.removeBook(e.target);\r\n    }\r\n    // update book\r\n    if (e.target.classList.contains('updateBook')) {\r\n        // show update form\r\n        addBookForm.classList.add('d-none');\r\n        updateBookForm.classList.remove('d-none');\r\n        // get details\r\n        const bookRow = e.target.closest('.book-row');\r\n        const id = bookRow.id;\r\n        const UI = new BookUI();\r\n        UI.getDetails(bookRow, id);\r\n    }\r\n    if (e.target.classList.contains('bookDone')) {\r\n        const bookRow = e.target.closest('.book-row');\r\n        bookRow.children[3].innerHTML = 'Done';\r\n        // show update and delete buttons\r\n        const links = Array.from(bookRow.children[4].children);\r\n        links.forEach(link => link.classList.remove('d-none'));\r\n\r\n        const title = bookRow.children[0].textContent;\r\n        const author = bookRow.children[1].textContent;\r\n        const genres = bookRow.children[2].textContent;\r\n        const count = +bookRow.id.split('-')[2];\r\n        const book = new Book(title, author, genres, count);\r\n        // Add to LS\r\n        Store.addBook(book);\r\n        // show back form\r\n        addBookForm.classList.remove('d-none');\r\n    }\r\n    if (e.target.classList.contains('wait')) {\r\n        // add ui instance\r\n        const UI = new BookUI();\r\n        UI.bookTimer(2, 1000);\r\n\r\n    }\r\n});\r\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$dfa3b02ea0c5825d$exports","URL","resolve","url","toString","$ae71de1f24d859ab$exports","$a7f82a9d7190a9dc$exports","$d963eb0dc8f60f2d$exports","$2aac3885343dc6b2$var$addBookForm","document","querySelector","$2aac3885343dc6b2$var$updateBookForm","$2aac3885343dc6b2$var$cancelUpdateBtn","$2aac3885343dc6b2$var$formAlert","$2aac3885343dc6b2$var$bookList","$2aac3885343dc6b2$var$confirmDelBtn","getElementsByClassName","$2aac3885343dc6b2$var$booksLeftEl","$2aac3885343dc6b2$var$booksCount","$2aac3885343dc6b2$var$Book","constructor","title","author","genres","count","this","$2aac3885343dc6b2$var$BookUI","addBookToList","book","row","createElement","classList","innerHTML","$parcel$interopDefault","appendChild","bookTimer","UpdateBookCount","add","showMsg","status","msg","textContent","remove","removeBook","target","contains","addEventListener","closest","$2aac3885343dc6b2$var$Store","split","setTimeout","booksLeft","getDetails","bookRow","children","getElementById","value","daysLeft","delay","daysLeftEl","countDown","timer","setInterval","clearInterval","static","books","localStorage","getItem","getBooks","forEach","newBook","push","setItem","stringify","index","splice","initBookCount","displayBooks","e","preventDefault","trim","UI","Array","from","find","toLocaleLowerCase","lastBook","reset","rowId","updatebook","link","addBook"],"version":3,"file":"index.5a446b7c.js.map"}